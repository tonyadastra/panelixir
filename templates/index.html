{% extends "layout.html" %}

{% block styles %}
<!--External CSS Files-->
<link rel="stylesheet" href="../static/css/all.css">

<!--Internal CSS Files-->
<link rel="stylesheet" href="../static/css/card.css">
<link rel="stylesheet" href="../static/css/interactive.css">
{#<link rel="stylesheet" href="../static/css/style.css">#}
{% endblock %}


{% block scripts %}
<!--External Source Libraries-->
<script src="../static/js/library/jquery.js"></script>
<script src="../static/js/library/popper.js"></script>
<script src="../static/js/library/bootstrap.js"></script>
<script src="../static/js/library/d3.v5.js"></script>
<script src="../static/js/library/topojson.client.js"></script>

<!--Internal JS Files-->
<script src="../static/js/card.js"></script>
<script src="../static/js/index.js"></script>

{% endblock %}

{% block content %}

<!-- Data Visualizations-->
<div class="row">
    <div class="col-xl-6 col-lg col-md-12" style="padding: 0;">
        <p class="update-time text-center" id="update_top">&nbsp;</p>
        <div id="vis1" class="vis"></div>
    </div>
    <div class="col-xl-6 col-lg col-md-12 col-xs-12 text-center">
        <div class="interactive-buttons" style="margin-bottom: 0.5rem;">
            <button class="btn btn-outline-primary button-font active" data-value="World" value="World"><i class="fa fa-globe-americas"></i>&nbsp;Worldwide</button>
            <button class="btn btn-outline-continent button-font" data-value="North America" value="North America">North
                America</button>
            <button class="btn btn-outline-continent button-font" data-value="Europe" value="Europe">Europe</button>
            <button class="btn btn-outline-continent button-font" data-value="Asia" value="Asia">Asia</button>
            <button class="btn btn-outline-continent button-font" data-value="Oceania" value="Oceania">Oceania</button>
            <button class="btn btn-outline-continent button-font" data-value="Africa" value="Africa">Africa</button>
            <button class="btn btn-outline-continent button-font" data-value="South America" value="South America">South
                America</button>
        </div>

        <div class="interactive-progress row">
            <!--            Extended Length of Bar1-->
            <div class="stage0" style="width: 18px"></div>
            <!--            Bar1-->
            <div class="col" style="padding: 0;">
                <div class="interactive-bar stage0">
                    <div class="bar-data" id="progress0">&nbsp;</div>
                </div>
            </div>
            <!--            Arrow1-->
            <div class="arrow-right-stage0 stage1"></div>
            <!--            Bar2-->
            <div class="col" style="padding: 0;">
                <div class="interactive-bar stage1">
                    <div class="bar-data" id="progress1">&nbsp;</div>
                </div>
            </div>
            <!-- Arrow2-->
            <div class="arrow-right-stage1 stage2"></div>
            <!-- Bar3-->
            <div class="col" style="padding: 0;">
                <div class="interactive-bar stage2">
                    <div class="bar-data" id="progress2">&nbsp;</div>
                </div>
            </div>
            <!-- Arrow3-->
            <div class="arrow-right-stage2 stage3"></div>
            <!-- Bar4-->
            <div class="col" style="padding: 0;">
                <div class="interactive-bar stage3">
                    <div class="bar-data" id="progress3">&nbsp;</div>
                </div>
            </div>
            <!--            Arrow4-->
            <div class="arrow-right-stage3 stage4"></div>
            <!--            Bar5-->
            <div class="col" style="padding: 0;">
                <div class="interactive-bar stage4">
                    <div class="bar-data" id="progress4">&nbsp;</div>
                </div>
            </div>
            <!--            Arrow5-->
            <div class="arrow-right-stage4"></div>
        </div>
        <div class="interactive-progress row" id="tag-between">
            <div class="col" style="padding: 0;">
                <div class="interactive-bar">
                    <div class="bar-tag text-stage0">Pre-Clinical</div>
                </div>
            </div>
            <div class="col" style="padding: 0;">
                <div class="interactive-bar">
                    <div class="bar-tag text-stage1">Phase I</div>
                </div>
            </div>
            <div class="col" style="padding: 0;">
                <div class="interactive-bar">
                    <div class="bar-tag text-stage2">Phase II</div>
                </div>
            </div>
            <div class="col" style="padding: 0;">
                <div class="interactive-bar">
                    <div class="bar-tag text-stage3">Phase III</div>
                </div>
            </div>
            <div class="col" style="padding: 0;">
                <div class="interactive-bar">
                    <div class="bar-tag text-stage4">Approval</div>
                </div>
            </div>
        </div>
        <div class="vis-bars">
            <div id="vis2" class="vis"></div>
            <div id="vis3" class="vis"></div>
        </div>
    </div>
</div>

{# News Section #}
<div class="news-wrapper">
    <div class="news" style="margin-top: 0.5rem">
        <h2 class="text-center" id="news-title">Vaccine Development News</h2>
        <ul class="news-list overflow" style="/*list-style: inside; text-align: center*/">
            {% for news in news_data %}
                <latest-news news-vac-id="{{news[0]}}" news-tag="{{news[1]}}" news-company="{{news[2]}}" news-text="{{news[3]}}"
                             news-date="{{news[4]}}" news-source="{{news[5]}}" news-category="{{news[6]}}" news-link="{{news[7]}}"></latest-news>
            {% endfor %}
        </ul>
    </div>
</div>

<div class="news-wrapper">
    <div class="news">
        <h2 class="text-center" id="news-title">Vaccine and Life</h2>
        <ul class="news-list overflow" style="overflow-x: hidden;/*list-style: inside; text-align: center*/">
            {% for news in general_news %}
                <latest-news news-vac-id="{{news[0]}}" news-tag="{{news[1]}}" news-company="{{news[2]}}" news-text="{{news[3]}}"
                             news-date="{{news[4]}}" news-source="{{news[5]}}" news-category="{{news[6]}}" news-link="{{news[7]}}"></latest-news>
            {% endfor %}
        </ul>
    </div>
</div>

{# Modal Displaying Companies, hidden by default#}
{#<button type="button" class="btn btn-primary" data-toggle="modal" data-target=".bd-example-modal-lg">Large modal</button>#}

<div class="modal fade bd-example-modal-xl" id="company-modal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header" id="display-company-header">
                <h5 class="modal-title" id="display-company-title">About this Vaccine</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
{#                    <span aria-hidden="true"></span>#}
                    <i class="fa fa-times"></i>
                </button>
            </div>
            <div id="append-card"></div>
        </div>
    </div>
</div>

<div class="ctr text-center">
    <h3 id="news-title">Vaccine Frontline</h3>
    <div class="card-deck">
        <div class="card">
            <img class="card-img-top" src="../static/img/vaccine-development.png" alt="Card image cap">
            <div class="card-body">
                <h5 class="card-title">The Vaccine Developing Process</h5>
                <p class="card-text">Learn about the different stages in the developing process of a COVID-19 vaccine: Pre-Clinical, Phase I, Phase II, Phase III, Limited Use, Approval, and more.</p>
                <a href="/vaccine-developing-process" class="stretched-link"></a>
            </div>
{#            <div class="card-footer">#}
{#                <small class="text-muted">Last updated 3 mins ago</small>#}
{#            </div>#}
        </div>
        <div class="card">
            <img class="card-img-top" src="../static/img/vaccine-distribution.jpg" alt="Card image cap">
            <div class="card-body">
                <h5 class="card-title">Distribution and Availability</h5>
                <p class="card-text">Learn about vaccine availability and how the vaccine is distributed across the United States. More categories will be available soon.</p>
                <a href="/vaccine-distribution" class="stretched-link"></a>
            </div>
{#            <div class="card-footer">#}
{#                <small class="text-muted">Last updated 3 mins ago</small>#}
{#            </div>#}
        </div>
{#        <div class="card">#}
{#            <img class="card-img-top" src="../static/img/vaccine2.jpg" alt="Card image cap">#}
{#            <div class="card-body">#}
{#                <h5 class="card-title">Science Behind Vaccines</h5>#}
{#                <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>#}
{#                <a href="#" class="stretched-link"></a>#}
{#            </div>#}
{#            <div class="card-footer">#}
{#                <small class="text-muted">Last updated 3 mins ago</small>#}
{#            </div>#}
{#        </div>#}
{#        <div class="card">#}
{#            <img class="card-img-top" src="../static/img/moderna.jpg" alt="Card image cap">#}
{#            <div class="card-body">#}
{#                <h5 class="card-title">People and Stories</h5>#}
{#                <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>#}
{#                <a href="#" class="stretched-link"></a>#}
{#            </div>#}
{#            <div class="card-footer">#}
{#                <small class="text-muted">Last updated 3 mins ago</small>#}
{#            </div>#}
{#        </div>#}
{#        <div class="card">#}
{#            <img class="card-img-top" src="../static/img/entertainment.jpg" alt="Card image cap">#}
{#            <div class="card-body">#}
{#                <h5 class="card-title">Entertainment</h5>#}
{#                <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>#}
{#                <a href="#" class="stretched-link"></a>#}
{#            </div>#}
{#            <div class="card-footer">#}
{#                <small class="text-muted">Last updated 3 mins ago</small>#}
{#            </div>#}
{#        </div>#}
    </div>
</div>


<div class="ctr text-center">
    <h3 id="news-title">Pfizer vs. Moderna, Which is Better?</h3>
{#    <table>#}
    <div class="row compare-header">
        <div class="col-2"><b class="vaccine-summary">Vaccine Summary</b></div>
        <div class="col">
            <b>Pfizer</b>
{#            <select class="compare-dropdown" id="compare-dropdown-1">#}
{#                <option class="vaccine-option-1" value="2">Pfizer</option>#}
{#                <option class="vaccine-option-1" value="1">Moderna</option>#}
{##}
{#            </select>#}
        </div>
        <div class="col">
            <b>Moderna</b>
{#            <select class="compare-dropdown" id="compare-dropdown-2">#}
{#                <option class="vaccine-option-2" value="1">Moderna</option>#}
{#                <option class="vaccine-option-2" value="2">Pfizer</option>#}
{#            </select>#}
        </div>
    </div>
    <div id="compare-table"></div>
</div>


{#<div class="text-center">#}
{#    <p class="source">Data Source:&nbsp;<b>The World Health Organization</b>: <br> <a#}
{#                href="https://www.who.int/publications/m/item/draft-landscape-of-covid-19-candidate-vaccines"#}
{#                 target="_blank"> Draft landscape of COVID-19 candidate vaccines</a>#}
{#    </p>#}
{#</div>#}
<!--Heading - Question-->
<!--<div class="heading">-->
<!--    <h1 id="bold">Who will be the first to develop a vaccine?</h1>-->
<!--</div>-->

{# Go to Top of Filter Bar #}
<div id="TagIWantToLoadTo"></div>
{# For Mobile Version Only #}
<div class="mobile-filter">
    <div class="row">
        <div class="col" style="text-align: center">
            <div class="column mobile-clear">
                <button type="button" class="btn btn-filter" data-toggle="modal" data-target="#exampleModalCenter" style="padding: 0.3rem 1.5rem!important;">
                  <i class="fa fa-filter"></i>&nbsp;Filter Vaccines
                </button>
            </div>

            <!-- Modal -->
            <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog" role="document">
                    <div class="modal-content" style="text-align: left">
{#                        <div class="modal-header">#}
{#                            <h5 class="modal-title" id="exampleModalLongTitle">Modal title</h5>#}
{#                        </div>#}
                        <div class="modal-body">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true"><i class="fa fa-times"></i></span>
                            </button>
                            <h6>Select Vaccine Stage</h6>
                            <div class="btn-group btn-group-1">
                                <button type="button" class="active btn btn-default btn-mobile-stage mobile-font stages-all" id="stages" value="" style="padding: 0.3rem 0.75rem!important;margin-bottom: 0.75em;">All Stages</button>
                                <button type="button" class="btn btn-default btn-mobile-stage mobile-stage-0-1 mobile-font" id="stages" value="0-1" style="margin-left: 0.3rem; padding: 0.3rem 0.75rem!important;margin-bottom: 0.75em;">Abandoned</button>
                            </div>
                            <br>
                            <div class="btn-group btn-group-1" role="group">
                                <button type="button" class="btn btn-default btn-mobile-stage mobile-stage-0 mobile-font" id="stages" value="0">Pre-Clinical</button>
                                <button type="button" class="btn btn-default btn-mobile-stage mobile-stage-1 mobile-font" id="stages" value="1">Phase I</button>
                                <button type="button" class="btn btn-default btn-mobile-stage mobile-stage-2 mobile-font" id="stages" value="2">Phase II</button>
                                <button type="button" class="btn btn-default btn-mobile-stage mobile-stage-3 mobile-font" id="stages" value="3">Phase III</button>
                                <button type="button" class="btn btn-default btn-mobile-stage mobile-stage-4-1 mobile-font" id="stages" value="4-1">Limited Use</button>
                                <button type="button" class="btn btn-default btn-mobile-stage mobile-stage-4 mobile-font" id="stages" value="4">Approval</button>
                            </div>
                            <h6>Select Country/Region</h6>
                            <p class="subtag">Popular countries:</p>
                            <div class="btn-group-2">
                                <button type="button" class="active btn btn-default btn-mobile-country mobile-font most-viewed country-all" value="" style="padding: 0.3rem 0.75rem!important;min-width: 0;">
                                    <i class="fa fa-globe-americas"></i>&nbsp;Worldwide
                                </button>
{#                            </div>#}
{#                            <div class="btn-group btn-group-2" role="group">#}
                                <button type="button" class="btn btn-default btn-mobile-country mobile-font most-viewed" id="United States" value="United States">United States</button>
                                <button type="button" class="btn btn-default btn-mobile-country mobile-font most-viewed" id="China" value="China">China</button>
                                <button type="button" class="btn btn-default btn-mobile-country mobile-font most-viewed" id="Russia" value="Russia">Russia</button>
                            </div>
                            <p class="subtag">Or select one from the following:</p>
                            <div class="dropdown">
                                <button class="btn btn-outline-secondary dropdown-mobile dropdown-toggle" type="button"
                                    data-toggle="dropdown" style="padding-left: 1.2rem!important; font-size: 0.95rem;">
                                    <span id="mobile-button">All(Default)</span> <i class="fa fa-angle-down vertical-center" style="right: 3%;" aria-hidden="true"></i>
                                </button>
                                <div class="dropdown-menu overflow dropdown-mobile" aria-labelledby="dropdownMenuButton" id="all-dropdown-items-country-mobile">
                                    <button class="active mobile-dropdown-item-ctry mobile-dropdown-item country-worldwide" id="country" value="">
                                        <i style="padding-left: 7px" class="fa fa-globe-americas"></i>&nbsp;<span style="padding-left: 0.5em;">Worldwide</span>
                                    </button>
                                </div>
                            </div>
                            <h6>Select Vaccine Platform</h6>
                            <div class="btn-group-3">
                                <button type="button" class="active btn btn-default btn-mobile-type mobile-font type-all" id="type" value="" style="padding: 0.3rem 0.75rem!important;min-width: 0!important;">All Platforms</button>
{#                            </div>#}
{#                            <div class="btn-group btn-group-3">#}
                                <button type="button" class="btn btn-default btn-mobile-type mobile-font" id="type" value="DNA%' or vac_type LIKE '%RNA">Nucleic Acid</button>
                                <button type="button" class="btn btn-default btn-mobile-type mobile-font" id="type" value="Viral Vector">Viral Vector</button>
                                <button type="button" class="btn btn-default btn-mobile-type mobile-font" id="type" value="Protein">Subunit</button>
                                <button type="button" class="btn btn-default btn-mobile-type mobile-font" id="type" value="Virus%' or vac_type LIKE '%Inactivated">Whole-Pathogen</button>
                                <button type="button" class="btn btn-default btn-mobile-type mobile-font" id="type" value="VLP">Nanoparticle</button>
                                <button type="button" class="btn btn-default btn-mobile-type mobile-font" id="type" value="Repurposed">Other Platforms</button>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal" style="font-size: 0.9rem; padding: 0.1875rem 0.5rem!important;margin-right: 0.9rem;">Cancel</button>
                            <button class="btn btn-primary submit-mobile-form" id="submit-form" style="font-size: 0.9rem; padding: 0.1875rem 1rem!important;">OK</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col" style="text-align: center">
            <div class="column mobile-clear">
                <button class="btn btn-clear submit-mobile-form" style="padding: 0.3rem 1.5rem!important;font-size: 0.8rem;">
                    Clear Filter
                </button>
            </div>
        </div>
    </div>
</div>

<!--Filter Data-->
<div class="filter">
    <div class="row">
        <div class="col-2 column filter-text">
            <i class="fa fa-filter"></i>&nbsp;<b>Filter Vaccines</b>
        </div>
        <!--            Vaccine Stage-->
        <div class="col column">
            <div class="dropdown">
                <button type="button" class="btn btn-outline-info dropdown-toggle" id="dropdown-desktop-stage" data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">
                    Vaccine Stage
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" id="all-dropdown-items-stages">
                    <button class="desktop-dropdown dropdown-item-stages dropdown-item-4 all-stages active" id="stages" value="_">All Stages</button>
                    <div class="dropdown-divider"></div>
                    <button class="desktop-dropdown dropdown-item-stages dropdown-item-0-1" id="stages" value="0-1">Abandoned</button>
                    <button class="desktop-dropdown dropdown-item-stages dropdown-item-0" id="stages" value="0">Pre-Clinical</button>
                    <button class="desktop-dropdown dropdown-item-stages dropdown-item-1" id="stages" value="1">Phase I</button>
                    <button class="desktop-dropdown dropdown-item-stages dropdown-item-2" id="stages" value="2">Phase II</button>
                    <button class="desktop-dropdown dropdown-item-stages dropdown-item-3" id="stages" value="3">Phase III</button>
                    <button class="desktop-dropdown dropdown-item-stages dropdown-item-4-1" id="stages" value="4-1">Limited Use</button>
{#                    <div class="dropdown-divider"></div>#}
                    <button class="desktop-dropdown dropdown-item-stages dropdown-item-4" id="stages" value="4">Approval</button>
                </div>
            </div>
        </div>

        <!-- Country-->
        <div class="col column">
            <!-- country dropdown -->
            <div class="dropdown">
                <button class="btn btn-outline-info dropdown-toggle" type="button" id="dropdown-desktop-country"
                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Country / Region
                </button>
                <div class="dropdown-menu overflow" aria-labelledby="dropdownMenuButton" id="all-dropdown-items-country">
                    <label>
                        <input class="form-control search-country" id="myInput" type="text" autocomplete="off" placeholder="Search">
                        <i style="position:absolute; right:8px;top:12px;" class="fa fa-search"></i>
                    </label>
                    <button class="desktop-dropdown dropdown-item-ctry worldwide-countries active" id="country" value="" onclick="desktopClick()">
                        <i class="fa fa-globe-americas" style="padding-left: 5px;"></i>&nbsp;&nbsp;&nbsp;Worldwide
                    </button>
                </div>
            </div>
        </div>

        <!-- Vaccine Platforms-->
        <div class="col column">
            <!-- types dropdown -->
            <div class="dropdown">
                <button class="btn btn-outline-info dropdown-toggle" type="button" id="dropdown-desktop-type"
                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Vaccine Platform
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" id="all-dropdown-items-platforms">
                    <button class="desktop-dropdown dropdown-item-type all-platforms active" id="type" value="">All Platforms</button>
                    <div class="dropdown-divider"></div>
                    <button class="desktop-dropdown dropdown-item-type" id="type" value="DNA%' or vac_type LIKE '%RNA">
                        Nucleic Acid Vaccines</button>
                    <button class="desktop-dropdown dropdown-item-type" id="type" value="Protein">
                        Subunit Vaccines</button>
                    <button class="desktop-dropdown dropdown-item-type" id="type" value="Viral Vector">
                        Viral Vector Vaccines</button>
                    <button class="desktop-dropdown dropdown-item-type" id="type" value="Virus%' or vac_type LIKE '%Inactivated">
                        Whole-Pathogen Vaccines</button>
                    <button class="desktop-dropdown dropdown-item-type" id="type" value="VLP">
                        Nanoparticle Vaccines</button>
                    <button class="desktop-dropdown dropdown-item-type" id="type" value="Repurposed">
                        Other Platforms</button>
                </div>
            </div>
        </div>

{#        <div class="col"></div>#}
        <div class="col-2"></div>
        <div class="col column" style="float: right;">
            <button class="btn btn-light align-right desktop-dropdown clear-filter" style="border-bottom: 2px solid #d2d1d1"
                value="clear">
                <b style="color: midnightblue;">Clear Filter</b>
            </button>
        </div>
        <div class="col-1"></div>
    </div>
</div>


<!-- list institutions -->
<div class="institutions" id="institutions">
    <div class="initial-cards">
        {% include 'institutions.html' %}
    </div>
    <div id="card_container"></div>
    <div id="mobile_container"></div>
    <div class="text-center" id="spinner"></div>
</div>

{% endblock %}